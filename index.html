<!doctype html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sistema de Estoque Profissional</title>
    <link rel="stylesheet" href="style.css" />
    <!-- Chart.js para gr√°ficos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <div class="app">
      <aside class="sidebar">
        <h3>FILTRAR PRODUTOS</h3>
        <input type="text" id="filtroNome" placeholder="Pesquisar por nome" />
        <label>Tags</label>
        <input type="text" placeholder="Filtrar por tag" />
        <label>SKU</label>
        <input type="text" placeholder="Filtrar por SKU" />
        <label>Condi√ß√µes</label>
        <select>
          <option>Todas as condi√ß√µes</option>
        </select>
        <label>Categoria</label>
        <select>
          <option>Todas as categorias</option>
        </select>
        <label>Localiza√ß√£o</label>
        <select>
          <option>Todas as localiza√ß√µes</option>
        </select>
        <div class="sidebar-buttons">
          <button class="clear">Limpar filtros</button>
          <button class="apply">Aplicar filtros</button>
        </div>
      </aside>

      <main class="main">
        <nav class="top-nav">
          <ul>
            <li id="navPainel" class="active">Painel</li>
            <li id="navProdutos">Produtos</li>
            <li id="navArmazem">Armaz√©m</li>
            <li>Pedidos</li>
            <li>Relat√≥rio</li>
          </ul>
          <div class="user">
            <span class="notification">2</span>
            <span>Usu√°rio ‚ñæ</span>
          </div>
        </nav>

        <!-- NOVA ABA: PAINEL -->
        <div id="abaPainel">
          <div class="dashboard-header">
            <h2>Vis√£o Geral do Estoque</h2>
            <div class="periodo-selector">
              <select id="selectPeriodo">
                <option value="hoje">Hoje</option>
                <option value="semana" selected>Esta Semana</option>
                <option value="mes">Este M√™s</option>
                <option value="ano">Este Ano</option>
              </select>
            </div>
          </div>

          <!-- CARDS DE M√âTRICAS -->
          <div class="metricas-container">
            <div class="card-metrica">
              <div class="card-icon">üì¶</div>
              <div class="card-content">
                <h3 id="totalProdutos">0</h3>
                <p>Total de Produtos</p>
              </div>
            </div>
            <div class="card-metrica">
              <div class="card-icon">üí∞</div>
              <div class="card-content">
                <h3 id="valorTotal">R$ 0,00</h3>
                <p>Valor Total</p>
              </div>
            </div>
            <div class="card-metrica">
              <div class="card-icon">üì•</div>
              <div class="card-content">
                <h3 id="produtosRecebimento">0</h3>
                <p>Em Recebimento</p>
              </div>
            </div>
            <div class="card-metrica alerta">
              <div class="card-icon">‚ö†Ô∏è</div>
              <div class="card-content">
                <h3 id="estoqueBaixo">0</h3>
                <p>Estoque Baixo</p>
              </div>
            </div>
          </div>

          <!-- GR√ÅFICOS -->
          <div class="graficos-container">
            <div class="grafico-card">
              <h3>üìä Distribui√ß√£o por Localiza√ß√£o</h3>
              <canvas id="graficoLocalizacao"></canvas>
            </div>
            <div class="grafico-card">
              <h3>üìà Top 5 Produtos Mais Movimentados</h3>
              <canvas id="graficoTopProdutos"></canvas>
            </div>
          </div>

          <!-- TABELAS R√ÅPIDAS -->
          <div class="tabelas-container">
            <div class="tabela-card">
              <h3>‚ö†Ô∏è Produtos com Estoque Baixo</h3>
              <div class="tabela-pequena-container">
                <table class="tabela-pequena">
                  <thead>
                    <tr>
                      <th>SKU</th>
                      <th>Nome</th>
                      <th>Dispon√≠vel</th>
                      <th>M√≠nimo</th>
                    </tr>
                  </thead>
                  <tbody id="tabelaEstoqueBaixo"></tbody>
                </table>
              </div>
            </div>

            <div class="tabela-card">
              <h3>üîÑ √öltimas Movimenta√ß√µes</h3>
              <div class="tabela-pequena-container">
                <table class="tabela-pequena">
                  <thead>
                    <tr>
                      <th>Hora</th>
                      <th>A√ß√£o</th>
                    </tr>
                  </thead>
                  <tbody id="tabelaUltimasMovimentacoes"></tbody>
                </table>
              </div>
            </div>
          </div>

          <!-- BOT√ÉO DE RELAT√ìRIO -->
          <div class="dashboard-footer">
            <button class="btn-relatorio" id="btnGerarRelatorio">
              üìÑ Gerar Relat√≥rio Detalhado
            </button>
          </div>
        </div>

        <!-- ABA PRODUTOS (EXISTENTE) -->
        <div id="abaProdutos" style="display: none">
          <div class="actions">
            <div>
              <select id="selectArmazem" class="btn-action">
                <option value="">Mudar Armaz√©m...</option>
                <option value="Armaz√©m 1">Armaz√©m 1</option>
                <option value="Armaz√©m 2">Armaz√©m 2</option>
                <option value="Armaz√©m 3">Armaz√©m 3</option>
              </select>
              <button id="btnEditar" class="btn-action">Editar</button>
              <button id="btnDeletar" class="btn-action">Deletar</button>
            </div>

            <div>
              <button class="btn-action" id="btnExportar">
                Exportar Selecionados
              </button>
              <button class="btn-action" id="btnImportar">
                Importar Dados
              </button>
              <button class="primary" id="btnAbrirModal">
                + Adicionar produto
              </button>
            </div>
          </div>

          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th><input type="checkbox" id="checkTodos" /></th>
                  <th>NOME</th>
                  <th>SKU</th>
                  <th>CONDI√á√ÉO</th>
                  <th>LOCALIZA√á√ÉO</th>
                  <th>DISPON√çVEL</th>
                  <th>RESERVADO</th>
                  <th>PRE√áO</th>
                  <th>MODIFICADO</th>
                </tr>
              </thead>
              <tbody id="tabelaProdutos"></tbody>
            </table>
          </div>

          <div class="pagination">
            <button class="btn-pag" id="btnPrimeira">Primeira</button>
            <button class="btn-pag" id="btnAnterior">Anterior</button>
            <span id="infoPagina">P√°gina 1 de 1</span>
            <button class="btn-pag" id="btnProxima">Pr√≥xima</button>

            <div class="page-size-selector">
              <span>Exibir:</span>
              <select id="selectItensPorPagina" class="btn-pag">
                <option value="5">5</option>
                <option value="10">10</option>
                <option value="20">20</option>
                <option value="50">50</option>
              </select>
            </div>
          </div>
        </div>

        <!-- ABA ARMAZ√âM (EXISTENTE) -->
        <div id="abaArmazem" style="display: none">
          <div class="warehouse-grid">
            <div
              class="zone"
              data-local="Armaz√©m 1"
              ondragover="allowDrop(event)"
              ondrop="drop(event)"
            >
              <div class="zone-header">
                <h3>Armaz√©m 1</h3>
                <span class="badge" id="count-armazem-1">0</span>
              </div>
              <div class="items-container" id="zone-armazem-1"></div>
            </div>
            <div
              class="zone"
              data-local="Armaz√©m 2"
              ondragover="allowDrop(event)"
              ondrop="drop(event)"
            >
              <div class="zone-header">
                <h3>Armaz√©m 2</h3>
                <span class="badge" id="count-armazem-2">0</span>
              </div>
              <div class="items-container" id="zone-armazem-2"></div>
            </div>
            <div
              class="zone"
              data-local="Armaz√©m 3"
              ondragover="allowDrop(event)"
              ondrop="drop(event)"
            >
              <div class="zone-header">
                <h3>Armaz√©m 3</h3>
                <span class="badge" id="count-armazem-3">0</span>
              </div>
              <div class="items-container" id="zone-armazem-3"></div>
            </div>
            <div
              class="zone incoming"
              data-local="Recebimento"
              ondragover="allowDrop(event)"
              ondrop="drop(event)"
            >
              <div class="zone-header">
                <h3>Recebimento (Entrada)</h3>
                <span class="badge" id="count-recebimento">0</span>
              </div>
              <div class="items-container" id="zone-recebimento"></div>
            </div>
          </div>

          <!-- HIST√ìRICO DE MOVIMENTA√á√ïES -->
          <div class="historico-painel">
            <div class="historico-header">
              <h3>üìã Hist√≥rico de Movimenta√ß√µes</h3>
              <span id="contador-historico">0 registros</span>
            </div>
            <div class="historico-logs" id="logsHistorico">
              <div class="log-vazio">
                Nenhuma movimenta√ß√£o registrada ainda.
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <input
      type="file"
      id="iptFileImport"
      accept=".txt,.csv"
      style="display: none"
    />

    <!-- MODAIS -->
    <div id="modalProduto" class="modal-overlay">
      <div class="modal-content modal-largo">
        <h3 id="modalTitulo">Cadastrar Novo Produto</h3>
        <div class="form-grid">
          <div class="form-group full-width">
            <label>Nome</label><input type="text" id="iptNome" />
          </div>
          <div class="form-group">
            <label>SKU</label><input type="text" id="iptSku" />
          </div>
          <div class="form-group">
            <label>Condi√ß√£o</label><input type="text" id="iptCond" />
          </div>
          <div class="form-group">
            <label>Local</label><input type="text" id="iptLocal" />
            <small style="color: #666; font-size: 11px; margin-top: 3px">
              Sugest√µes: Recebimento, Armaz√©m 1, Armaz√©m 2, Armaz√©m 3
            </small>
          </div>
          <div class="form-group">
            <label>Pre√ßo</label><input type="text" id="iptPreco" />
          </div>
          <div class="form-group">
            <label>Dispon√≠vel</label
            ><input type="number" id="iptQuant" value="0" />
          </div>
          <div class="form-group">
            <label>Reservado</label
            ><input type="number" id="iptQuantReservada" value="0" />
          </div>
        </div>
        <div class="modal-buttons">
          <button class="clear" id="btnCancelar">Cancelar</button>
          <button class="apply" id="btnSalvar">Salvar</button>
        </div>
      </div>
    </div>

    <div id="modalExportar" class="modal-overlay">
      <div class="modal-content text-center">
        <h3>Exportar Dados</h3>
        <p style="margin-bottom: 10px; font-size: 14px; color: #666">
          Defina o nome do arquivo para download:
        </p>
        <input
          type="text"
          id="iptNomeArquivo"
          placeholder="estoque_resumo"
          style="
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
          "
        />
        <div class="modal-buttons">
          <button class="clear" id="btnCancelarExport">Cancelar</button>
          <button class="apply" id="btnConfirmarExport">Baixar .txt</button>
        </div>
      </div>
    </div>

    <div id="modalAviso" class="modal-overlay">
      <div class="modal-content text-center">
        <h3>Aviso</h3>
        <p id="avisoMsg" style="margin: 15px 0"></p>
        <div class="modal-buttons">
          <button class="apply" id="btnFecharAviso">Ok</button>
        </div>
      </div>
    </div>

    <div id="modalConfirmacao" class="modal-overlay">
      <div class="modal-content text-center">
        <h3>Confirmar</h3>
        <p id="confirmMsg" style="margin: 15px 0"></p>
        <div class="modal-buttons">
          <button class="clear" id="btnCancelarConfirm">N√£o</button>
          <button class="apply" id="btnAceitarConfirm">Sim</button>
        </div>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
