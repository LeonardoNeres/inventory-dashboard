<!doctype html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sistema de Estoque Profissional</title>
    <link rel="stylesheet" href="style.css" />
    <!-- Chart.js para gr√°ficos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <div class="app">
      <aside class="sidebar">
        <h3>FILTRAR PRODUTOS</h3>
        <input type="text" id="filtroNome" placeholder="Pesquisar por nome" />
        <label>Tags</label>
        <input type="text" placeholder="Filtrar por tag" />
        <label>SKU</label>
        <input type="text" placeholder="Filtrar por SKU" />
        <label>Condi√ß√µes</label>
        <select>
          <option>Todas as condi√ß√µes</option>
        </select>
        <label>Categoria</label>
        <select>
          <option>Todas as categorias</option>
        </select>
        <label>Localiza√ß√£o</label>
        <select>
          <option>Todas as localiza√ß√µes</option>
        </select>
        <div class="sidebar-buttons">
          <button class="clear">Limpar filtros</button>
          <button class="apply">Aplicar filtros</button>
        </div>
      </aside>

      <main class="main">
        <nav class="top-nav">
          <ul>
            <li id="navPainel" class="active">Painel</li>
            <li id="navProdutos">Produtos</li>
            <li id="navArmazem">Armaz√©m</li>
            <li id="navPedidos">Pedidos</li>
            <li>Relat√≥rio</li>
          </ul>
          <div class="user">
            <span class="notification">2</span>
            <span>Usu√°rio ‚ñæ</span>
          </div>
        </nav>

        <!-- NOVA ABA: PAINEL -->
        <div id="abaPainel">
          <div class="dashboard-header">
            <h2>Vis√£o Geral do Estoque</h2>
            <div class="periodo-selector">
              <select id="selectPeriodo">
                <option value="hoje">Hoje</option>
                <option value="semana" selected>Esta Semana</option>
                <option value="mes">Este M√™s</option>
                <option value="ano">Este Ano</option>
              </select>
            </div>
          </div>

          <!-- CARDS DE M√âTRICAS -->
          <div class="metricas-container">
            <div class="card-metrica">
              <div class="card-icon">üì¶</div>
              <div class="card-content">
                <h3 id="totalProdutos">0</h3>
                <p>Total de Produtos</p>
              </div>
            </div>
            <div class="card-metrica">
              <div class="card-icon">üí∞</div>
              <div class="card-content">
                <h3 id="valorTotal">R$ 0,00</h3>
                <p>Valor Total</p>
              </div>
            </div>
            <div class="card-metrica">
              <div class="card-icon">üì•</div>
              <div class="card-content">
                <h3 id="produtosRecebimento">0</h3>
                <p>Em Recebimento</p>
              </div>
            </div>
            <div class="card-metrica alerta">
              <div class="card-icon">‚ö†Ô∏è</div>
              <div class="card-content">
                <h3 id="estoqueBaixo">0</h3>
                <p>Estoque Baixo</p>
              </div>
            </div>
          </div>

          <!-- GR√ÅFICOS -->
          <div class="graficos-container">
            <div class="grafico-card">
              <h3>üìä Distribui√ß√£o por Localiza√ß√£o</h3>
              <canvas id="graficoLocalizacao"></canvas>
            </div>
            <div class="grafico-card">
              <h3>üìà Top 5 Produtos Mais Movimentados</h3>
              <canvas id="graficoTopProdutos"></canvas>
            </div>
          </div>

          <!-- TABELAS R√ÅPIDAS -->
          <div class="tabelas-container">
            <div class="tabela-card">
              <h3>‚ö†Ô∏è Produtos com Estoque Baixo</h3>
              <div class="tabela-pequena-container">
                <table class="tabela-pequena">
                  <thead>
                    <tr>
                      <th>SKU</th>
                      <th>Nome</th>
                      <th>Dispon√≠vel</th>
                      <th>M√≠nimo</th>
                    </tr>
                  </thead>
                  <tbody id="tabelaEstoqueBaixo"></tbody>
                </table>
              </div>
            </div>

            <div class="tabela-card">
              <h3>üîÑ √öltimas Movimenta√ß√µes</h3>
              <div class="tabela-pequena-container">
                <table class="tabela-pequena">
                  <thead>
                    <tr>
                      <th>Hora</th>
                      <th>A√ß√£o</th>
                    </tr>
                  </thead>
                  <tbody id="tabelaUltimasMovimentacoes"></tbody>
                </table>
              </div>
            </div>
          </div>

          <!-- BOT√ÉO DE RELAT√ìRIO -->
          <div class="dashboard-footer">
            <button class="btn-relatorio" id="btnGerarRelatorio">
              üìÑ Gerar Relat√≥rio Detalhado
            </button>
          </div>
        </div>

        <!-- ABA PRODUTOS (EXISTENTE) -->
        <div id="abaProdutos" style="display: none">
          <div class="actions">
            <div>
              <select id="selectArmazem" class="btn-action">
                <option value="">Mudar Armaz√©m...</option>
                <option value="Armaz√©m 1">Armaz√©m 1</option>
                <option value="Armaz√©m 2">Armaz√©m 2</option>
                <option value="Armaz√©m 3">Armaz√©m 3</option>
              </select>
              <button id="btnEditar" class="btn-action">Editar</button>
              <button id="btnDeletar" class="btn-action">Deletar</button>
            </div>

            <div>
              <button class="btn-action" id="btnExportar">
                Exportar Selecionados
              </button>
              <button class="btn-action" id="btnImportar">
                Importar Dados
              </button>
              <button class="primary" id="btnAbrirModal">
                + Adicionar produto
              </button>
            </div>
          </div>

          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th><input type="checkbox" id="checkTodos" /></th>
                  <th>NOME</th>
                  <th>SKU</th>
                  <th>CONDI√á√ÉO</th>
                  <th>LOCALIZA√á√ÉO</th>
                  <th>DISPON√çVEL</th>
                  <th>RESERVADO</th>
                  <th>PRE√áO</th>
                  <th>MODIFICADO</th>
                </tr>
              </thead>
              <tbody id="tabelaProdutos"></tbody>
            </table>
          </div>

          <div class="pagination">
            <button class="btn-pag" id="btnPrimeira">Primeira</button>
            <button class="btn-pag" id="btnAnterior">Anterior</button>
            <span id="infoPagina">P√°gina 1 de 1</span>
            <button class="btn-pag" id="btnProxima">Pr√≥xima</button>

            <div class="page-size-selector">
              <span>Exibir:</span>
              <select id="selectItensPorPagina" class="btn-pag">
                <option value="5">5</option>
                <option value="10">10</option>
                <option value="20">20</option>
                <option value="50">50</option>
              </select>
            </div>
          </div>
        </div>

        <!-- ABA ARMAZ√âM (EXISTENTE) -->
        <div id="abaArmazem" style="display: none">
          <div class="warehouse-grid">
            <div
              class="zone"
              data-local="Armaz√©m 1"
              ondragover="allowDrop(event)"
              ondrop="drop(event)"
            >
              <div class="zone-header">
                <h3>Armaz√©m 1</h3>
                <span class="badge" id="count-armazem-1">0</span>
              </div>
              <div class="items-container" id="zone-armazem-1"></div>
            </div>
            <div
              class="zone"
              data-local="Armaz√©m 2"
              ondragover="allowDrop(event)"
              ondrop="drop(event)"
            >
              <div class="zone-header">
                <h3>Armaz√©m 2</h3>
                <span class="badge" id="count-armazem-2">0</span>
              </div>
              <div class="items-container" id="zone-armazem-2"></div>
            </div>
            <div
              class="zone"
              data-local="Armaz√©m 3"
              ondragover="allowDrop(event)"
              ondrop="drop(event)"
            >
              <div class="zone-header">
                <h3>Armaz√©m 3</h3>
                <span class="badge" id="count-armazem-3">0</span>
              </div>
              <div class="items-container" id="zone-armazem-3"></div>
            </div>
            <div
              class="zone incoming"
              data-local="Recebimento"
              ondragover="allowDrop(event)"
              ondrop="drop(event)"
            >
              <div class="zone-header">
                <h3>Recebimento (Entrada)</h3>
                <span class="badge" id="count-recebimento">0</span>
              </div>
              <div class="items-container" id="zone-recebimento"></div>
            </div>
          </div>

          <!-- HIST√ìRICO DE MOVIMENTA√á√ïES -->
          <div class="historico-painel">
            <div class="historico-header">
              <h3>üìã Hist√≥rico de Movimenta√ß√µes</h3>
              <span id="contador-historico">0 registros</span>
            </div>
            <div class="historico-logs" id="logsHistorico">
              <div class="log-vazio">
                Nenhuma movimenta√ß√£o registrada ainda.
              </div>
            </div>
          </div>
        </div>

        <!-- ABA PEDIDOS (NOVA) -->
        <div id="abaPedidos" style="display: none">
          <div class="actions">
            <div>
              <select id="selectFiltrarStatus" class="btn-action">
                <option value="">Todos os status</option>
                <option value="rascunho">Rascunho</option>
                <option value="pendente">Pendente</option>
                <option value="concluido">Conclu√≠do</option>
                <option value="cancelado">Cancelado</option>
              </select>
              <select id="selectFiltrarTipo" class="btn-action">
                <option value="">Todos os tipos</option>
                <option value="entrada">Entrada</option>
                <option value="saida">Sa√≠da</option>
              </select>
            </div>

            <div>
              <button class="btn-action" id="btnCancelarPedido">
                Cancelar Pedido
              </button>
              <button class="btn-action" id="btnConfirmarPedido">
                Confirmar Pedido
              </button>
              <button class="primary" id="btnNovoPedido">+ Novo Pedido</button>
            </div>
          </div>

          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th><input type="checkbox" id="checkTodosPedidos" /></th>
                  <th>N¬∫ PEDIDO</th>
                  <th>TIPO</th>
                  <th>STATUS</th>
                  <th>CLIENTE/FORNECEDOR</th>
                  <th>ITENS</th>
                  <th>VALOR TOTAL</th>
                  <th>DATA</th>
                  <th>CRIADO POR</th>
                  <th>A√á√ïES</th>
                </tr>
              </thead>
              <tbody id="tabelaPedidos"></tbody>
            </table>
          </div>

          <div class="pagination">
            <button class="btn-pag" id="btnPrimeiraPedidos">Primeira</button>
            <button class="btn-pag" id="btnAnteriorPedidos">Anterior</button>
            <span id="infoPaginaPedidos">P√°gina 1 de 1</span>
            <button class="btn-pag" id="btnProximaPedidos">Pr√≥xima</button>

            <div class="page-size-selector">
              <span>Exibir:</span>
              <select id="selectItensPorPaginaPedidos" class="btn-pag">
                <option value="5">5</option>
                <option value="10" selected>10</option>
                <option value="20">20</option>
                <option value="50">50</option>
              </select>
            </div>
          </div>
        </div>
      </main>
    </div>

    <input
      type="file"
      id="iptFileImport"
      accept=".txt,.csv"
      style="display: none"
    />

    <!-- MODAIS -->
    <div id="modalProduto" class="modal-overlay">
      <div class="modal-content modal-largo">
        <h3 id="modalTitulo">Cadastrar Novo Produto</h3>
        <div class="form-grid">
          <div class="form-group full-width">
            <label>Nome</label><input type="text" id="iptNome" />
          </div>
          <div class="form-group">
            <label>SKU</label><input type="text" id="iptSku" />
          </div>
          <div class="form-group">
            <label>Condi√ß√£o</label><input type="text" id="iptCond" />
          </div>
          <div class="form-group">
            <label>Local</label><input type="text" id="iptLocal" />
            <small style="color: #666; font-size: 11px; margin-top: 3px">
              Sugest√µes: Recebimento, Armaz√©m 1, Armaz√©m 2, Armaz√©m 3
            </small>
          </div>
          <div class="form-group">
            <label>Pre√ßo</label><input type="text" id="iptPreco" />
          </div>
          <div class="form-group">
            <label>Dispon√≠vel</label
            ><input type="number" id="iptQuant" value="0" />
          </div>
          <div class="form-group">
            <label>Reservado</label
            ><input type="number" id="iptQuantReservada" value="0" />
          </div>
        </div>
        <div class="modal-buttons">
          <button class="clear" id="btnCancelar">Cancelar</button>
          <button class="apply" id="btnSalvar">Salvar</button>
        </div>
      </div>
    </div>

    <div id="modalExportar" class="modal-overlay">
      <div class="modal-content text-center">
        <h3>Exportar Dados</h3>
        <p style="margin-bottom: 10px; font-size: 14px; color: #666">
          Defina o nome do arquivo para download:
        </p>
        <input
          type="text"
          id="iptNomeArquivo"
          placeholder="estoque_resumo"
          style="
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
          "
        />
        <div class="modal-buttons">
          <button class="clear" id="btnCancelarExport">Cancelar</button>
          <button class="apply" id="btnConfirmarExport">Baixar .txt</button>
        </div>
      </div>
    </div>

    <div id="modalAviso" class="modal-overlay">
      <div class="modal-content text-center">
        <h3>Aviso</h3>
        <p id="avisoMsg" style="margin: 15px 0"></p>
        <div class="modal-buttons">
          <button class="apply" id="btnFecharAviso">Ok</button>
        </div>
      </div>
    </div>

    <div id="modalConfirmacao" class="modal-overlay">
      <div class="modal-content text-center">
        <h3>Confirmar</h3>
        <p id="confirmMsg" style="margin: 15px 0"></p>
        <div class="modal-buttons">
          <button class="clear" id="btnCancelarConfirm">N√£o</button>
          <button class="apply" id="btnAceitarConfirm">Sim</button>
        </div>
      </div>
    </div>

    <!-- MODAL NOVO PEDIDO -->
    <div id="modalPedido" class="modal-overlay">
      <div class="modal-content modal-largo">
        <h3 id="modalTituloPedido">Novo Pedido</h3>

        <div class="form-grid">
          <div class="form-group">
            <label>Tipo</label>
            <select id="iptTipoPedido">
              <option value="entrada">Entrada (Compra/Devolu√ß√£o)</option>
              <option value="saida">Sa√≠da (Venda/Transfer√™ncia)</option>
            </select>
          </div>

          <div class="form-group">
            <label>Status</label>
            <select id="iptStatusPedido">
              <option value="rascunho">Rascunho</option>
              <option value="pendente">Pendente</option>
            </select>
          </div>

          <div class="form-group full-width">
            <label>Cliente/Fornecedor</label>
            <input
              type="text"
              id="iptClienteFornecedor"
              placeholder="Nome do cliente ou fornecedor"
            />
          </div>

          <div class="form-group">
            <label>Data de Entrega</label>
            <input type="date" id="iptDataEntrega" />
          </div>

          <div class="form-group">
            <label>Observa√ß√µes</label>
            <input type="text" id="iptObservacoes" placeholder="Opcional" />
          </div>
        </div>

        <!-- SE√á√ÉO DE ADICIONAR PRODUTOS -->
        <div
          style="
            margin-top: 20px;
            border-top: 1px solid #eee;
            padding-top: 15px;
          "
        >
          <h4 style="margin-bottom: 15px; font-size: 14px">
            üì¶ Produtos do Pedido
          </h4>

          <div style="display: flex; gap: 10px; margin-bottom: 15px">
            <select
              id="selectProdutoParaAdicionar"
              style="flex: 1; padding: 8px"
            >
              <option value="">Selecione um produto...</option>
              <!-- Produtos ser√£o preenchidos via JavaScript -->
            </select>
            <input
              type="number"
              id="iptQuantidadeProduto"
              placeholder="Qtd"
              value="1"
              min="1"
              style="width: 80px; padding: 8px"
            />
            <button
              class="btn-action"
              id="btnAdicionarProdutoPedido"
              style="padding: 8px 15px"
            >
              Adicionar
            </button>
          </div>

          <div class="table-container" style="max-height: 200px">
            <table>
              <thead>
                <tr>
                  <th>PRODUTO</th>
                  <th>SKU</th>
                  <th>QUANTIDADE</th>
                  <th>PRE√áO UNIT.</th>
                  <th>SUBTOTAL</th>
                  <th>A√á√ÉO</th>
                </tr>
              </thead>
              <tbody id="tabelaItensPedido"></tbody>
            </table>
          </div>

          <div style="text-align: right; margin-top: 15px; font-weight: bold">
            <span style="font-size: 16px">Total: R$ </span>
            <span id="totalPedido" style="font-size: 18px; color: #ff4757"
              >0,00</span
            >
          </div>
        </div>

        <div class="modal-buttons">
          <button class="clear" id="btnCancelarPedidoModal">Cancelar</button>
          <button class="apply" id="btnSalvarPedido">Salvar Pedido</button>
        </div>
      </div>
    </div>

    <!-- MODAL DETALHES PEDIDO -->
    <div id="modalDetalhesPedido" class="modal-overlay">
      <div class="modal-content modal-largo">
        <h3>Detalhes do Pedido <span id="detalhesNumeroPedido"></span></h3>

        <div class="form-grid" style="margin-bottom: 20px">
          <div class="form-group">
            <label style="font-weight: normal; color: #666">Tipo</label>
            <p id="detalhesTipo" style="margin-top: 5px; font-weight: bold"></p>
          </div>

          <div class="form-group">
            <label style="font-weight: normal; color: #666">Status</label>
            <p id="detalhesStatus" style="margin-top: 5px"></p>
          </div>

          <div class="form-group">
            <label style="font-weight: normal; color: #666">Data Cria√ß√£o</label>
            <p id="detalhesDataCriacao" style="margin-top: 5px"></p>
          </div>

          <div class="form-group">
            <label style="font-weight: normal; color: #666">Data Entrega</label>
            <p id="detalhesDataEntrega" style="margin-top: 5px"></p>
          </div>

          <div class="form-group full-width">
            <label style="font-weight: normal; color: #666"
              >Cliente/Fornecedor</label
            >
            <p
              id="detalhesCliente"
              style="margin-top: 5px; font-weight: bold"
            ></p>
          </div>

          <div class="form-group full-width">
            <label style="font-weight: normal; color: #666">Observa√ß√µes</label>
            <p
              id="detalhesObservacoes"
              style="margin-top: 5px; font-style: italic"
            ></p>
          </div>
        </div>

        <h4 style="margin-bottom: 15px; font-size: 14px">üì¶ Produtos</h4>
        <div class="table-container" style="max-height: 250px">
          <table>
            <thead>
              <tr>
                <th>PRODUTO</th>
                <th>SKU</th>
                <th>QUANTIDADE</th>
                <th>PRE√áO UNIT.</th>
                <th>SUBTOTAL</th>
              </tr>
            </thead>
            <tbody id="detalhesItensPedido"></tbody>
          </table>
        </div>

        <div
          style="
            text-align: right;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 2px solid #eee;
          "
        >
          <span style="font-size: 18px; font-weight: bold">Total: R$ </span>
          <span
            id="detalhesTotalPedido"
            style="font-size: 22px; color: #ff4757"
          ></span>
        </div>

        <div class="modal-buttons" style="margin-top: 20px">
          <button class="apply" id="btnFecharDetalhes">Fechar</button>
        </div>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
